local AuctionManager = {
    CurrentItem = nil,
    HighestBid = 0,
    HighestBidder = nil,
    TimeRemaining = 0,
    IsAuctionActive = false
}

-- Function to start an auction
function AuctionManager:StartAuction(brainrotItem, duration)
    self.CurrentItem = brainrotItem
    self.HighestBid = brainrotItem.BaseValue or 100
    self.HighestBidder = nil
    self.TimeRemaining = duration
    self.IsAuctionActive = true
    
    print("Auction started for: " .. brainrotItem.Name)
end

-- Function to handle a new bid
function AuctionManager:PlaceBid(player, amount)
    if not self.IsAuctionActive then return false, "No active auction" end
    if amount <= self.HighestBid then return false, "Bid too low" end
    
    -- Update lead
    self.HighestBid = amount
    self.HighestBidder = player
    
    -- "Steal" Mechanic: Reset/Extend timer when a bid is placed
    self.TimeRemaining = math.max(self.TimeRemaining, 5) -- Give others 5 seconds to outbid
    
    return true, "Bid placed!"
end
task.spawn(function()
    while true do
        if AuctionManager.IsAuctionActive then
            if AuctionManager.TimeRemaining > 0 then
                task.wait(1)
                AuctionManager.TimeRemaining -= 1
            else
                -- Auction Ended!
                AuctionManager:EndAuction()
            end
        end
        task.wait(0.1)
    end
end)

function AuctionManager:EndAuction()
    self.IsAuctionActive = false
    if self.HighestBidder then
        print(self.HighestBidder.Name .. " won the " .. self.CurrentItem.Name)
        -- CODE HERE: Transfer the Brainrot to the player's base/inventory
    else
        print("Auction ended with no winner.")
    end
end

